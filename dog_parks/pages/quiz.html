<!DOCTYPE html>
<html>
<title>Take the Quiz</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <head>
    	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    	<script src ="../java.js"></script>
        <link rel="stylesheet" type="text/css" href="../style.css">
    </head>

<body>
	<div class ="side">
	<div class = "hamburger"> <img class = "img" src = "../images/hamburger.png"></div>
	<div class = "hamburger-links"> <center><a href ="../index.html">Home</a>
									<a href ="parks.html">Parks</a>
									<a href ="quiz.html">Quiz</a>
									<a href ="submit.html">Submit</a></center>
								</div>
	<div class = "sidebar">
		<center><img src ="../images/home.png"></center>
		<div class = "page-title"> Our Quiz </div>
		<div class = "page-description">Take our short quiz and find out what park we think you should go to. 
		</div>
	</div>
</div>
	<div class = "content-box">
		<div class = "content">
			<div id = "quiz"></div>
			<button id ="submit">Submit</button>
			<div id = "results"></div>
		</div>
	</div>
</body>

	<script type="text/javascript">
		(function() {
  function buildQuiz() {
    // we'll need a place to store the HTML output
    const output = [];

    // for each question...
    myQuestions.forEach((currentQuestion, questionNumber) => {
      // we'll want to store the list of answer choices
      const answers = [];

      // and for each available answer...
      for (letter in currentQuestion.answers) {
        // ...add an HTML radio button
        answers.push(
          `<label>
            <input type="radio" name="question${questionNumber}" value="${letter}">
            
            ${currentQuestion.answers[letter]}
          </label>`
        );
      }

      // add this question and its answers to the output
      output.push(
        `<div class="question"> ${currentQuestion.question} </div>
        <div class="answers"> ${answers.join("")} </div>`
      );
    });

    // finally combine our output list into one string of HTML and put it on the page
    quizContainer.innerHTML = output.join("");
  }

  function showResults() {
    // gather answer containers from our quiz
    const answerContainers = quizContainer.querySelectorAll(".answers");

    // keep track of user's answers
    let numCorrect = 0;

    // for each question...
    myQuestions.forEach((currentQuestion, questionNumber) => {
      // find selected answer
      const answerContainer = answerContainers[questionNumber];
      const selector = `input[name=question${questionNumber}]:checked`;
      const userAnswer = (answerContainer.querySelector(selector) || {}).value;

      // if answer is a
      if (userAnswer == "a") {
        // add to the one to the numCorrect
        numCorrect++;
      }
      // if answer is b
      if (userAnswer == "b") {
      	numCorrect += 2;
      	// add two to the numCorrect
      }
      // if answer is c
      if (userAnswer == "c"){
      	numCorrect += 3;
      	// add three to the numCorrect
      }
      if (userAnswer == "d"){
      	numCorrect += 4;
      	// add four to the numCorrecr
      }
    });

    // decides what park to show by averaging the score
    if (numCorrect/myQuestions.length >= 3.5 && numCorrect/myQuestions.length <= 4){
    	userPark = `You should head to The Fens`.link("fens.html");
    }
    if (numCorrect/myQuestions.length >= 2.5 && numCorrect/myQuestions.length < 3.5){
    	userPark = `You should head to Peter's Park`.link("pp.html");
	}
	if (numCorrect/myQuestions.length >= 1.5 && numCorrect/myQuestions.length < 2.5){
    	 userPark = `You should head to Kevin Fitzgerald Park`.link("kfp.html");
    }
    if (numCorrect/myQuestions.length >= 1 && numCorrect/myQuestions.length < 1.5){
    	userPark = `You should head to Boston Commons`.link("bc.html");
    }

    // draws those results
    resultsContainer.innerHTML = userPark;

    ;}

  const quizContainer = document.getElementById("quiz");
  const resultsContainer = document.getElementById("results");
  const submitButton = document.getElementById("submit");
  const myQuestions = [
    {
      question: "What area of Boston is of most interest to you?",
      answers: {
        a: "Downtown Boston",
        b: "Roxbury/Mission Hill",
        c: "South End",
        d: "Back Bay"
      },
      correctAnswer: "c"
    },
    {
      question: "Of these options, which activity would you most enjoy right now?",
      answers: {
        a: "Checking out a new restaurant or cafe",
        b: "Relaxing in the grass, looking over the city",
        c: "Meeting new people",
        d: "People watching"
      },
      correctAnswer: "c"
    },
    {
      question: "Based on your mood right now, what genre of music would you like to listen to?",
      answers: {
        a: "Pop",
        b: "R&B or Indie",
        c: "Rock n' Roll",
        d: "Blues or Jazz"
      },
      correctAnswer: "d"
    },
    {
      question: "What kind of dog would you say you are?",
      answers: {
        a: "Gentle Basset Hound",
        b: "Playful Labrador Retriever",
        c: "Outgoing Corgi",
        d: "Watchful German Shepherd"
      },
      correctAnswer: "d"
    },
    {
      question: "What activity would you want to do with dogs right now?",
      answers: {
        a: "Play fetch or chase",
        b: "Play frisbee",
        c: "Anything would be fun",
        d: "Watch them interact with other dogs or the environment"
      },
      correctAnswer: "d"
    }    
  ];

  // display quiz right away
  buildQuiz();

  // on submit, show results
  submitButton.addEventListener("click", showResults);
})();
		
	</script>

</html>